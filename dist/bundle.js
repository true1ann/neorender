(()=>{"use strict";({854:function(t,o){var n=this&&this.__awaiter||function(t,o,n,e){return new(n||(n=Promise))((function(r,i){function s(t){try{c(e.next(t))}catch(t){i(t)}}function d(t){try{c(e.throw(t))}catch(t){i(t)}}function c(t){var o;t.done?r(t.value):(o=t.value,o instanceof n?o:new n((function(t){t(o)}))).then(s,d)}c((e=e.apply(t,o||[])).next())}))};Object.defineProperty(o,"__esModule",{value:!0});class e{static defineComponent(t){try{if(!t.name||!t.template)throw new Error("Components must have a Name and a Template.");return this.components[t.name]=t,Object.freeze(this.components[t.name]),Object.defineProperty(this.components,t.name,{configurable:!1}),!0}catch(t){throw new Error(t)}}static untilVisible(t){return n(this,void 0,void 0,(function*(){const o=document.querySelector(t);if(!o)throw new Error(`Element not found for selector: ${t}`);function e(t){const o=document.querySelector(t);if(!o)return!1;const n=window.getComputedStyle(o);return"none"!==n.display&&"hidden"!==n.visibility&&"0"!==n.opacity}return new Promise((r=>{const i=new IntersectionObserver((o=>{o.forEach((o=>{o.isIntersecting&&(i.unobserve(o.target),(()=>{n(this,void 0,void 0,(function*(){for(;!e(t);)yield new Promise((t=>setTimeout(t,100)));r(!0)}))})())}))}),{root:null,rootMargin:"0px",threshold:.1});i.observe(o)}))}))}static generateComponentId(){let t;do{t=[...Array(64)].map((()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(62*Math.random())])).join("")}while(this.componentSelectors.includes(t));return t=`NRCID_${t}`,this.componentSelectors.push(t),t}static findComponentById(t){return document.querySelector(`[data-nr-cid=${t}]`)}static returnComponent(t,o,e){return n(this,void 0,void 0,(function*(){try{const n=this.components[t];if(!n)throw new Error(`Component ${t} is not defined.`);const r=this.generateComponentId();let i;if(e.cid=r,i={useShadowRoot:!0,closeShadowRoot:!1,mountConfig:{id:null,className:null},lazyLoad:!1},"function"==typeof n.beforeCreate){const t=n.beforeCreate(o,e);i=Object.assign(Object.assign({},i),t)}i.lazyLoad&&(e.mountingTo?yield this.untilVisible(e.mountingTo):console.warn(`Component ${t} was probably mounted with nr.scriptMount(). Full lazyLoading IS NOT supported by nr.scriptMount()\nIf not, please leave an issue on GitHub`));const s=document.createElement("div");let d;if(d=i.useShadowRoot?s.attachShadow({mode:i.closeShadowRoot?"closed":"open"}):s,"string"==typeof i.mountConfig.id&&(s.id=i.mountConfig.id),"string"==typeof i.mountConfig.className&&(s.className=i.mountConfig.className),d.innerHTML=n.template,n.scopedStyles)if(i.useShadowRoot){const t=document.createElement("style");t.textContent=n.scopedStyles,d.appendChild(t)}else console.warn(`Component "${n.name}" has scopedStyles, but shadowRoot is disabled. scopedStyles will be ignored.`);return"function"==typeof n.main&&n.main(d,o,e),s.setAttribute("data-nr-cid",r),{context:d,config:i,root:s,nr:{cid:r}}}catch(t){throw new Error(t)}}))}static mount(t,o,e){return n(this,void 0,void 0,(function*(){var n,r;try{const i=this.components[t];if(!i)throw new Error(`Component ${t} is not defined.`);const s=document.querySelector(o);if(!s)throw new Error(`Element ${s} is not found.`);if(this.mountedComponents[o]){if(this.mountedComponents[o]===t)return console.warn(`Component ${this.mountedComponents[o]} is already mounted to ${o}`),!0;throw new Error(`Element ${o} already has a component mounted to it: ${this.mountedComponents[o]}`)}const d=yield this.returnComponent(t,e,{type:"mount",mountingTo:o,cid:null});if(!d)throw new Error(`Failed to mount ${t}: nr.returnComponent() didnt return anything`);return s.appendChild(d.root),this.mountedComponents[o]=t,"function"==typeof i.afterCreate&&i.afterCreate(null===(n=this.findComponentById(d.nr.cid))||void 0===n?void 0:n.shadowRoot,e,{type:"mount",mountingTo:o,cid:d.nr.cid}),"function"==typeof i.lazyLoad&&d&&(yield this.untilVisible(`[data-nr-cid=${d.nr.cid}]`),i.lazyLoad(null===(r=this.findComponentById(d.nr.cid))||void 0===r?void 0:r.shadowRoot,e,{type:"mount",mountingTo:o,cid:d.nr.cid})),!0}catch(t){throw new Error(t)}}))}static remount(t,o){try{return this.unmount(t),o&&delete this.mountedComponents[t],this.mount(o||this.mountedComponents[t],t,null)}catch(t){throw new Error(t)}}static unmount(t){return n(this,void 0,void 0,(function*(){var o;try{const n=this.mountedComponents[t];if(n){const e=this.components[n];"function"==typeof e.beforeDelete&&(yield e.beforeDelete(null===(o=document.querySelector(`${t} > div`))||void 0===o?void 0:o.shadowRoot));const r=document.querySelector(t);return r&&(r.innerHTML=""),delete this.mountedComponents[t],!0}return console.warn(`Tried to unmount NR from ${t}, but nothing was mounted to it.`),!0}catch(t){throw new Error(t)}}))}static scriptMount(t,o){return n(this,void 0,void 0,(function*(){var n,e;try{const r=document.currentScript;if(!r)throw new Error("scriptMount is NOT meant to be executed in script, or console. use mount or returnComponent instead.");const i=this.components[t];if(!i)throw new Error(`Component ${t} is not defined.`);const s=yield this.returnComponent(t,o,{type:"scriptMount",mountingTo:null});if(!r.parentNode||!s)throw new Error("Parent node of the script tag is null or componentObj is false.");r.parentNode.replaceChild(s.root,r),"function"==typeof i.afterCreate&&i.afterCreate(null===(n=this.findComponentById(s.nr.cid))||void 0===n?void 0:n.shadowRoot,o,{type:"scriptMount",mountingTo:null,cid:s.nr.cid}),"function"==typeof i.lazyLoad&&(yield this.untilVisible(`[data-nr-cid=${s.nr.cid}]`),i.lazyLoad(null===(e=this.findComponentById(s.nr.cid))||void 0===e?void 0:e.shadowRoot,o,{type:"scriptMount",mountingTo:null,cid:s.nr.cid}))}catch(t){throw new Error(t)}}))}}e.components={},e.mountedComponents={},e.componentSelectors=[],e.version="NeoRender Br5",e.verNum=5,window.nr=e}})[854](0,{})})();